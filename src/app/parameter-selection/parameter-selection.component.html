<div class="container" style="text-align: center"> <img src="/assets/img/logo.png" alt="" width="20%" style="margin-bottom: 3%">
    
    <!--Logo und Erklärung-->
    <div class="row">
        <div class="col-sm">
            <app-explanation-popover popoverText="Diese Software dient dazu, die Produktion von Chips und Süßigkeiten zu simulieren. 
            Dafür wird auf dem Server jeweils eine gewisse Anzahl Lieferanten, Produktionsunternehmen und Kunden erstellt, die Rohstoffe und Materialien kaufen, 
            diese zu Endprodukten verarbeiten und schließlich konsumieren. 
            Für eine schnelle Simulation können alle oder einige Eingabefelder leer gelassen werden - stattdessen werden die angezeigten Platzhalter verwendet.
            "></app-explanation-popover>
        </div>
    </div> 

    <!--Schnelle Simulation mit Defaultwerten-->
    <div class="row">
        <div class="col-sm">
            <div class="text-center"> <br>
                <button type="submit" (click)="fastSim()" id="button"> schnelle Simulation </button>
                <br>
              </div>
        </div>
    </div>
    <hr>
    <br>

    <form #simulationInput="ngForm" (ngSubmit)="onSubmit(simulationInput.value)" style="padding-bottom: 2%">

    <!--Rundenanzahl und Eventwahrscheinlichkeit-->
    <div class="row">
      <div class="col-sm">
        <div><label for="rundenanzahl">Anzahl Runden:</label>
          <app-explanation-popover
            popoverText="Diese Simulation arbeitet rundenbasiert. In jeder Runde werden Rohstoffe hergestellt, sowie Produkte hergestellt und verkauft">
          </app-explanation-popover>
        </div>
        <input required name="rundenanzahl" id="input" [(ngModel)]="simulationInput.rundenanzahl" placeholder="{{siumlation.rundenanzahl}}"
          type="number" class="form-control">
        <div class="input-error" *ngIf="simulationInput.rundenanzahl < 1">
          Rundenanzahl muss mindestens 1 sein
        </div>
      </div>
      <div class="col-sm">
        <label for="eventWahrscheinlichkeit">Eventwahrscheinlichkeit:</label>
        <span> {{ simulationInput.eventWahrscheinlichkeit * 100 | number:'1.0-0' }} %</span>
        <app-explanation-popover
          popoverText="Während jeder Runde können Events auftreten, die Konsequenzen für die weitere Simulation haben. Die Wahrscheinlichkeit kann von 'keine Events' bis '1 garantiertes Event' pro Runde gehen. Ein Beispiel ist Dürre, was sich auf die Produktion von Rohstoffen auswirken kann.">
        </app-explanation-popover>
        <input required name="eventWahrscheinlichkeit" [(ngModel)]="simulationInput.eventWahrscheinlichkeit"
          placeholder="0.005" type="range" class="custom-range" id="padding" min="0" max="1"
          value="eventWahrscheinlichkeit" step="0.005">
      </div>
    </div>
    <hr>
    <div class="row">
      <h2 class="col-sm">Lieferanten:</h2>
      <h2 class="col-sm">Produzenten:</h2>
      <h2 class="col-sm">Kunden:</h2>
    </div>
    <br>

    <!--Anzahl Akteure + Inputvalidierung-->
    <div class="row">
      <div class="col-sm">
        <label for="lieferantenanzahl">Anzahl Lieferanten:</label>
        <app-explanation-popover popoverText="Wie viele Lieferanten sollen in dieser Simulation generiert werden?">
        </app-explanation-popover>
        <input required name="lieferantenanzahl" id="input" [(ngModel)]="simulationInput.lieferantenanzahl"
          placeholder="30" type="number" class="form-control">
        <div class="input-error" *ngIf="simulationInput.lieferantenanzahl < 1">
          Mindestens 1 Lieferant
        </div>
      </div>
      <div class="col-sm">
        <label for="produktionsunternehmenanzahl">Anzahl Produzenten:</label>
        <app-explanation-popover
          popoverText="Wie viele Produktionsunternehmen sollen in dieser Simulation generiert werden?">
        </app-explanation-popover>
        <input required name="produktionsunternehmenanzahl" id="input"
          [(ngModel)]="simulationInput.produktionsunternehmenanzahl" placeholder="3" type="number" class="form-control">
        <div class="input-error" *ngIf="simulationInput.produktionsunternehmenanzahl < 1">
          Mindestens 1 Produzent
        </div>
      </div>
      <div class="col-sm">
        <label for="kundenanzahl">Anzahl Kunden:</label>
        <app-explanation-popover popoverText="Wie viele Kunden sollen in dieser Simulation generiert werden?">
        </app-explanation-popover>
        <input required name="kundenanzahl" id="input" [(ngModel)]="simulationInput.kundenanzahl" placeholder="300"
          type="number" class="form-control">
        <div class="input-error" *ngIf="simulationInput.kundenanzahl < 1">
          Mindestens 1 Kunde
        </div>
      </div>
    </div>
    <hr>

    <!--Startkapital-->
    <div class="row">
      <div class="col-sm">
        <label for="startKapitalLMin">Kapital Lieferanten:</label>
        <app-explanation-popover
          popoverText="Jedem der {{ simulationInput.lieferantenanzahl }} Lieferanten wird ein zufällig generiertes Startkapital in diesem Bereich zugeordnet">
        </app-explanation-popover>
        <div style="display: inline-flex;">
          <input style="width: 50%" id="input" required name="startKapitalLMin"
            [(ngModel)]="simulationInput.startKapitalLMin" placeholder="1000" type="number" class="form-control">
          <input style="width: 50%" id="input" required name="startKapitalKMax"
            [(ngModel)]="simulationInput.startKapitalLMax" placeholder="4000" type="number" class="form-control">
        </div>
      </div>
      <div class="col-sm">
        <label for="startKapitalPUMin">Kapital Produzenten:</label>
        <app-explanation-popover
          popoverText="Jedem der {{ simulationInput.produktionsunternehmenanzahl }} Produzenten wird ein zufällig generiertes Startkapital in diesem Bereich zugeordnet">
        </app-explanation-popover>
        <div style="display: inline-flex;">
          <input style="width: 50%" id="input" required name="startKapitalPUMin"
            [(ngModel)]="simulationInput.startKapitalPUMin" placeholder="10000" type="number"
            class="form-control small">
          <input style="width: 50%" id="input" required name="startKapitalPUMax"
            [(ngModel)]="simulationInput.startKapitalPUMax" placeholder="40000" type="number" class="form-control">
        </div>
      </div>

      <div class="col-sm">
        <label for="startKapitalKMin">Kapital Kunden:</label>
        <app-explanation-popover
          popoverText="Jedem der {{ simulationInput.kundenanzahl }} möglichen Kunden wird ein zufällig generiertes Startkapital in diesem Bereich zugeordnet, das während der Simulation zur Verfügung steht">
        </app-explanation-popover>
        <div style="display: inline-flex;">
          <input style="width: 50%" id="input" required name="startKapitalKMin"
            [(ngModel)]="simulationInput.startKapitalKMin" placeholder="100" type="number" class="form-control">
          <input style="width: 50%" id="input" required name="startKapitalLMax"
            [(ngModel)]="simulationInput.startKapitalKMax" placeholder="300" type="number" class="form-control">
        </div>
      </div>
    </div>

    <!--Inputvalidation Startkapital-->
    <div class="row">
      <div class="col-sm">
        <div class="input-error" *ngIf="simulationInput.startkapitalLMin < 1 || simulationInput.startKapitalLMin < 1">
          Kapital muss mindestens 1 sein
        </div>
        <div class="input-error" *ngIf="simulationInput.startKapitalLMax < simulationInput.startKapitalLMin">
          Max.-Kapital muss größer als Min.-Kapital sein
        </div>
      </div>
      <div class="col-sm">
        <div class="input-error" *ngIf="simulationInput.startkapitalPUMin < 1 || simulationInput.startKapitalPUMin < 1">
          Kapital muss mindestens 1 sein
        </div>
        <div class="input-error" *ngIf="simulationInput.startKapitalPUMax < simulationInput.startKapitalPUMin">
          Max.-Kapital muss größer als Min.-Kapital sein
        </div>
      </div>
      <div class="col-sm">
        <div class="input-error" *ngIf="simulationInput.startkapitalKMin < 1 || simulationInput.startKapitalKMin < 1">
          Kapital muss mindestens 1 sein
        </div>
        <div class="input-error" *ngIf="simulationInput.startKapitalKMax < simulationInput.startKapitalKMin">
          Max.-Kapital muss größer als Min.-Kapital sein
        </div>
      </div>
    </div>
    <hr>

    <!--Produktionsmenge-->
    <div class="row">
      <div class="col-sm">
        <label for="startKapitalLMin">Produktionsmenge Lieferanten:</label>
        <app-explanation-popover
          popoverText="Jedem der {{ simulationInput.lieferantenanzahl }} Lieferanten wird eine Liefermenge in diesem Bereich zugetraut">
        </app-explanation-popover>
        <div style="display: inline-flex;">
          <input style="width: 50%" id="input" required name="startKapitalLMin"
            [(ngModel)]="simulationInput.produktionsmengeLMin" placeholder="10" type="number" class="form-control">
          <input style="width: 50%" id="input" required name="startKapitalLMax"
            [(ngModel)]="simulationInput.produktionsmengeLMax" placeholder="30" type="number" class="form-control">
        </div>
      </div>
      <div class="col-sm">
        <label for="startKapitalPUMin">Produktionsmenge Produzenten:</label>
        <app-explanation-popover
          popoverText="Jedem der {{ simulationInput.produktionsunternehmenanzahl }} Produktionsunternehmen wird eine Produktionsmenge in diesem Bereich zugetraut">
        </app-explanation-popover>
        <div style="display: inline-flex">
          <input style="width: 50%" id="input" required name="startKapitalPUMin"
            [(ngModel)]="simulationInput.produktionsmengePUMin" placeholder="9" type="number" class="form-control">
          <input style="width: 50%" id="input" required name="startKapitalPUMax"
            [(ngModel)]="simulationInput.produktionsmengePUMax" placeholder="20" type="number" class="form-control">
        </div>
      </div>
      <div class="col-sm">
        <!--empty-->
      </div>
    </div>

     <!--Inputvalidation Produktionsmenge-->
     <div class="row">
        <div class="col-sm">
          <div class="input-error" *ngIf="simulationInput.produktionsmengeLMax < 1 || simulationInput.produktionsmengeLMin < 1">
            Produktionsmenge muss mindestens 1 sein
          </div>
          <div class="input-error" *ngIf="simulationInput.produktionsmengeLMax < simulationInput.produktionsmengeLMin">
            Max.-Produktionsmenge kleiner als Min.-Produktionsmenge
          </div>
        </div>
        <div class="col-sm">
          <div class="input-error" *ngIf="simulationInput.produktionsmengePUMin < 1 || simulationInput.produktionsmengePUMin < 1">
            Produktionsmenge muss mindestens 1 sein
          </div>
          <div class="input-error" *ngIf="simulationInput.produktionsmengePUMax < simulationInput.produktionsmengePUMin">
            Max.-Produktionsmenge kleiner als Min.-Produktionsmenge
          </div>
        </div>
        <div class="col-sm">
            <!--empty-->
        </div>
      </div>
    <hr>

    <!--Lagerkapazität-->
    <div class="row">
      <div class="col-sm">
        <label for="lagerLMin">Lagerkapazität Lieferanten:</label>
        <app-explanation-popover
          popoverText="Für jedes Produktionsunternehmen wird ein Lager in zufälliger Größe aus diesem Bereich generiert">
        </app-explanation-popover>
        <div style="display: inline-flex;">
          <input style="width: 50%;" id="input" required name="lagerLMin" [(ngModel)]="simulationInput.lagerLMin"
            placeholder="100" type="number" class="form-control">
          <input style="width: 50%;" id="input" required name="lagerLMax" [(ngModel)]="simulationInput.lagerLMax"
            placeholder="200" type="number" class="form-control">
        </div>
      </div>
      <div class="col-sm">
        <label for="lagerPUMin">Lagerkapazität Produzenten:</label>
        <app-explanation-popover
          popoverText="Für jedes Produktionsunternehmen wird ein Lager in zufälliger Größe aus diesem Bereich generiert">
        </app-explanation-popover>
        <div style="display: inline-flex;">
          <input style="width: 50%;" id="input" required name="lagerPUMin" [(ngModel)]="simulationInput.lagerPUMin"
            placeholder="90" type="number" class="form-control">
          <input style="width: 50%;" id="input" required name="lagerPUMax" [(ngModel)]="simulationInput.lagerPUMax"
            placeholder="30" type="number" class="form-control">
        </div>
      </div>
      <div class="col-sm">
        <!--empty-->
      </div>
    </div>

    <!--Inputvalidation produktionsmenge-->
    <div class="row">
        <div class="col-sm">
          <div class="input-error" *ngIf="simulationInput.lagerLMax < 1 || simulationInput.lagerLMin < 1">
            Lagerkapazität muss mindestens 1 sein
          </div>
          <div class="input-error" *ngIf="simulationInput.lagerLMax < simulationInput.lagerLMin">
            Max.-Lagerkapazität kleiner als Min.-Lagerkapazität
          </div>
        </div>
        <div class="col-sm">
          <div class="input-error" *ngIf="simulationInput.lagerPUMax < 1 || simulationInput.lagerPUMin < 1">
            Lagerkapazität muss mindestens 1 sein
          </div>
          <div class="input-error" *ngIf="simulationInput.lagerPUMax < simulationInput.lagerPUMin">
            Max.-Lagerkapazität kleiner als Min.-Lagerkapazität
          </div>
        </div>
        <div class="col-sm">
            <!--empty-->
        </div>
      </div>   

    <br>
    <div class="text-center"> <br>
      <button type="submit" id="button"> Simulation starten </button>
      <div class="input-error">
          {{ inputError }}
      </div>
      <br>
    </div>
  </form>
</div>
